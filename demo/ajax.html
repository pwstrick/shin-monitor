<!--
 * @Author: strick
 * @LastEditors: strick
 * @Date: 2023-01-13 16:32:08
 * @LastEditTime: 2023-06-16 15:51:01
 * @Description: 监控Ajax
 * @FilePath: /web/shin-monitor/demo/ajax.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>监控Ajax</title>
    <script src="../dist/shin.umd.js"></script>
    <script>
        shin.setParams({
          token: 'pwstrick',
          record: {
            isOpen: false
          },
          crash: {
            isOpen: false
          },
          ajax: {
            isFilterSendFunc: (req) => {
              return req.status >= 500 || req.ajax.url === '/user';
            }
          }
        });
    </script>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
    <script>
      /**
       * 测试错误
       * Failed to read the 'responseText' property from 'XMLHttpRequest': 
       * The value is only accessible if the object's 'responseType' is '' or 'text' (was 'json').
       */
      // const xhr = new XMLHttpRequest();
      // xhr.responseType = 'json';
      // xhr.open('GET', './data.json');
      // xhr.onload = function() {
      //   const jsonResponse = xhr.response;
      //   /**
      //    * responseText 是一个错误提示
      //    * [Exception: DOMException: Failed to read the 'responseText'...
      //    */
      //   const textResponse = xhr.responseText;
      // };
      // xhr.send();
      // 测试请求
      axios({
        url: './data.json',
        method: 'get',
        responseType: 'json',
      }).then(response => console.log(response.data))
    </script>
</body>
</html>